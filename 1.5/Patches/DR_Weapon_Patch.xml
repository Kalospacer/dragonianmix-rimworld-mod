<?xml version="1.0" encoding="utf-8" ?>
<Patch>

	<Operation Class="PatchOperationSequence">
		
		<operations>
			<li Class="PatchOperationTest">
				<xpath>Defs/ThingDef[defName="DR_BattleMace"]</xpath>
				
			</li>
			<li Class="PatchOperationAdd">
				<xpath>Defs/ThingDef[defName="DR_BattleMace"]</xpath>
				<value>
					<weaponTags>
						<li>DR_BattleMace</li>
					</weaponTags>
				</value>
			</li>
		</operations>
	</Operation>

	<Operation Class="PatchOperationSequence">
		
		<operations>
			<li Class="PatchOperationTest">
				<xpath>Defs/ThingDef[defName="DR_Battlesword"]</xpath>
				
			</li>
			<li Class="PatchOperationAdd">
				<xpath>Defs/ThingDef[defName="DR_Battlesword"]</xpath>
				<value>
					<weaponTags>
						<li>DR_Battlesword</li>
					</weaponTags>
				</value>
			</li>

		</operations>
	</Operation>

	<Operation Class="PatchOperationSequence">
		
		<operations>
			<li Class="PatchOperationTest">
				<xpath>Defs/ThingDef[defName="DR_BattleStaff"]</xpath>
				
			</li>
			<li Class="PatchOperationAdd">
				<xpath>Defs/ThingDef[defName="DR_BattleStaff"]</xpath>
				<value>
					<weaponTags>
						<li>DR_BattleStaff</li>
					</weaponTags>
				</value>
			</li>
			<li Class="PatchOperationAdd">
				<xpath>Defs/ThingDef[defName="DR_BattleStaff"]</xpath>
				<value>
					<thingCategories>
						<li>WeaponsRanged</li>
					  </thingCategories>
					  <verbs>
						<li>
						  <verbClass>Verb_ShootBeam</verbClass>
						  <hasStandardCommand>true</hasStandardCommand>
						  <warmupTime>1.0</warmupTime>
						  <range>24.9</range>
						  <minRange>3.9</minRange>
						  <beamFullWidthRange>6.9</beamFullWidthRange>
						  <burstShotCount>5</burstShotCount>
						  <showBurstShotStats>false</showBurstShotStats>
						  <beamWidth>6</beamWidth>
						  <ticksBetweenBurstShots>22</ticksBetweenBurstShots>
						  <beamDamageDef>Beam</beamDamageDef>
						  <soundCastTail>GunTail_Medium</soundCastTail>
						  <muzzleFlashScale>9</muzzleFlashScale>
						  <soundCastBeam>BeamGraser_Shooting</soundCastBeam>
						  <beamGroundFleckDef>Fleck_BeamBurn</beamGroundFleckDef>
						  <beamFleckChancePerTick>0.32</beamFleckChancePerTick>
						  <beamMaxDeviation>1.5</beamMaxDeviation>
						  <beamCurvature>0.6</beamCurvature>
						  <beamMoteDef>Mote_GraserBeamBase</beamMoteDef>
						  <beamEndEffecterDef>GraserBeam_End</beamEndEffecterDef>
						  <beamChanceToStartFire>0.85</beamChanceToStartFire>
						  <beamChanceToAttachFire>0.85</beamChanceToAttachFire>
						  <beamFireSizeRange>0.55~0.85</beamFireSizeRange>
						  <beamLineFleckDef>Fleck_BeamSpark</beamLineFleckDef>
						  <beamStartOffset>0.8</beamStartOffset>
						  <beamLineFleckChanceCurve>
							<points>
							  <li>(0, 0)</li>
							  <li>(0.65, 0.4)</li>
							  <li>(1, 0.75)</li>
							</points>
						  </beamLineFleckChanceCurve>
						</li>
					  </verbs>
					<comps Inherit="False">
						<li Class="CompProperties_EquippableAbilityReloadable">
						  <abilityDef>DR_BattleStaffBurner</abilityDef>
						</li>
						<li Class="CompProperties_Forbiddable"/>
						<li Class="CompProperties_Styleable"/>
						<li Class="CompProperties_Biocodable"/>
						<li>
						  <compClass>CompQuality</compClass>
						</li>
						<li Class="CompProperties_Art">
						  <nameMaker>NamerArtWeaponGun</nameMaker>
						  <descriptionMaker>ArtDescription_WeaponGun</descriptionMaker>
						  <minQualityForArtistic>Excellent</minQualityForArtistic>
						</li>
					  </comps>
				</value>
			</li>

		</operations>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="DR_BattleStaff"]/tools</xpath>
		<value>
			<tools>
				<li>
					<label>handle</label>
					<capacities>
						<li>Poke</li>
					</capacities>
					<power>8</power>
					<cooldownTime>2</cooldownTime>
				</li>
				<li>
					<label>physical-magic</label>
					<capacities>
						<li>Blunt</li>
						<li>Demolish</li>
					</capacities>
					<power>15</power>
					<extraMeleeDamages>
						<li>
							<def>Flame</def>
							<amount>30</amount>
							<chance>1</chance>
						  </li>
						<li>
							<def>Stun</def>
							<amount>1.5</amount>
							<chance>0.25</chance>
						</li>
					</extraMeleeDamages>
					<cooldownTime>5.2</cooldownTime>
				</li>
			</tools>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="DR_BattleStaff"]/statBases</xpath>
		<value>
			<statBases>
				<WorkToMake>12000</WorkToMake>
				<Mass>15</Mass>
				<AccuracyTouch>0.60</AccuracyTouch>
				<AccuracyShort>0.70</AccuracyShort>
				<AccuracyMedium>0.65</AccuracyMedium>
				<AccuracyLong>0.55</AccuracyLong>
				<RangedWeapon_Cooldown>1.70</RangedWeapon_Cooldown>
			  </statBases>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="DR_BattleStaff"]/weaponClasses</xpath>
		<value>
			<weaponClasses>
				<li>Ranged</li>
			  </weaponClasses>		
		</value>
	</Operation>

</Patch>